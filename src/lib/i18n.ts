export type Locale = "en" | "es" | "ca";

export const LOCALES: { value: Locale; label: string }[] = [
  { value: "en", label: "English" },
  { value: "es", label: "Español" },
  { value: "ca", label: "Català" },
];

const translations: Record<Locale, Record<string, string>> = {
  en: {
    // Intro
    "intro.start": "Start",
    "intro.imageCount": "You'll see {count} image{plural}",
    "intro.guidedTourCount": "You'll evaluate {count} image{plural}, then compare {pairs} pairs",
    "intro.sessionNotFound": "Survey not found.",
    "intro.loadError": "Failed to load survey.",

    "intro.firstName": "First name",
    "intro.lastName": "Last name (optional)",
    "intro.age": "Age (optional)",
    "intro.firstNameRequired": "Please enter your first name",
    "intro.audioConsent": "Is it ok to record audio? We'll use the transcript to better assess your feedback.",
    "intro.audioYes": "Yes",
    "intro.audioNo": "No",

    // Evaluate
    "eval.phaseLabel": "Phase 1 of 2 — Rate",
    "eval.nOfM": "{n} of {total}",
    "eval.seeVideo": "See video",
    "eval.recording": "Recording...",
    "eval.audioRecorded": "Audio recorded",
    "eval.next": "Next",
    "eval.nextPhase": "Next Phase",
    "eval.finish": "Finish",
    "eval.submitting": "Submitting...",
    "eval.submitError": "Failed to submit your response. Please try again.",
    "eval.noImages": "No images to evaluate.",
    "eval.scaleLow": "Blah!",
    "eval.scaleHigh": "Great!",
    "eval.preferThis": "Prefer This",
    "eval.playingAudio": "Playing audio...",
    "eval.oops": "Oops",

    // Compare
    "compare.phaseLabel": "Phase 2 of 2 — Compare",
    "compare.pairNofM": "Pair {n} of {total}",
    "compare.vs": "VS",
    "compare.tapInstruction": "Tap the image you prefer",
    "compare.stronglyPrefer": "Strongly prefer",
    "compare.noPreference": "No preference",
    "compare.noPairs": "No pairs to compare.",
    "compare.breakTitle": "Almost done! Can you do a few more?",
    "compare.breakContinue": "OK, let's go",
    "compare.breakTired": "Sorry, I'm tired",
    "compare.round2Label": "Bonus Round",

    // Done
    "done.finalThoughts": "Any final thoughts?",
    "done.finalThoughtsPlaceholder": "Type your thoughts here...",
    "done.doneButton": "Done",
    "done.modalTitle": "Before you go!",
    "done.submitRecording": "Submit Recording",
    "done.submitting": "Submitting...",
    "done.confirmation": "Your recording has been submitted. Thank you!",
    "done.closeTab": "Thank you! All DONE!",
    "done.submitError": "Failed to submit your recording. Please try again.",
    "done.yourFavourite": "Your favourite",
    "done.yourFavourites": "Your favourites",
    "done.wantToOrder": "Would you like to own one of the very first Dormy? Get on the Beta tester list!",
    "done.wantToOrderPlural": "Would you like to own one of the very first Dormy? Get on the Beta tester list!",
    "done.enterEmail": "Enter your email",
    "done.submitOrder": "Submit",
    "done.orderConfirmation": "Thank you! We'll be in touch.",
    "done.noFavourites": "Thanks for participating!",
    "done.ctaBeta": "Get on the beta testers list",
    "done.ctaBetaDesc": "Be the first to know when Dormy launches",
    "done.ctaBetaSuccess": "You're on the list!",
    "done.ctaPreorder": "Buy your own highly discounted Dormy (pre-order) — {price}",
    "done.ctaPreorderDesc": "One time discount for our early adopters!",
    "done.ctaPreorderSuccess": "Pre-order confirmed! We'll be in touch.",
    "done.ctaShare": "Help us! Send this fun survey to your friends!",
    "done.ctaShareDesc": "This helps them and us!",
    "done.shareWhatsAppMessage": "Oh! Check out Dormy! I just helped shape this new smart charger. Take the quiz here: {url}",
    "done.shareWhatsApp": "Send via WhatsApp",
    "done.shareCopyLink": "Copy link",
    "done.shareLinkCopied": "Copied!",
  },
  es: {
    "intro.start": "Comenzar",
    "intro.imageCount": "Verás {count} imagen{plural}",
    "intro.guidedTourCount": "Evaluarás {count} imagen{plural} y luego compararás {pairs} pares",
    "intro.sessionNotFound": "Encuesta no encontrada.",
    "intro.loadError": "Error al cargar la encuesta.",

    "intro.firstName": "Nombre",
    "intro.lastName": "Apellido (opcional)",
    "intro.age": "Edad (opcional)",
    "intro.firstNameRequired": "Por favor, introduce tu nombre",
    "intro.audioConsent": "¿Está bien grabar audio? Usaremos la transcripción para evaluar mejor tus comentarios.",
    "intro.audioYes": "Sí",
    "intro.audioNo": "No",

    "eval.phaseLabel": "Fase 1 de 2 — Valorar",
    "eval.nOfM": "{n} de {total}",
    "eval.seeVideo": "Ver vídeo",
    "eval.recording": "Grabando...",
    "eval.audioRecorded": "Audio grabado",
    "eval.next": "Siguiente",
    "eval.nextPhase": "Siguiente fase",
    "eval.finish": "Terminar",
    "eval.submitting": "Enviando...",
    "eval.submitError": "No se pudo enviar tu respuesta. Inténtalo de nuevo.",
    "eval.noImages": "No hay imágenes para evaluar.",
    "eval.scaleLow": "¡Mal!",
    "eval.scaleHigh": "¡Genial!",
    "eval.preferThis": "Prefiero esta",
    "eval.playingAudio": "Reproduciendo audio...",
    "eval.oops": "Ups",

    "compare.phaseLabel": "Fase 2 de 2 — Comparar",
    "compare.pairNofM": "Par {n} de {total}",
    "compare.vs": "VS",
    "compare.tapInstruction": "Toca la imagen que prefieras",
    "compare.stronglyPrefer": "Prefiero mucho",
    "compare.noPreference": "Sin preferencia",
    "compare.noPairs": "No hay pares para comparar.",
    "compare.breakTitle": "¡Casi terminado! ¿Puedes hacer unas más?",
    "compare.breakContinue": "Vale, vamos",
    "compare.breakTired": "Lo siento, estoy cansado/a",
    "compare.round2Label": "Ronda extra",

    "done.finalThoughts": "¿Alguna impresión final?",
    "done.finalThoughtsPlaceholder": "Escribe tus impresiones aquí...",
    "done.doneButton": "Listo",
    "done.modalTitle": "¡Antes de irte!",
    "done.submitRecording": "Enviar grabación",
    "done.submitting": "Enviando...",
    "done.confirmation": "Tu grabación se ha enviado. ¡Gracias!",
    "done.closeTab": "Gracias! Todo LISTO!",
    "done.submitError": "No se pudo enviar tu grabación. Inténtalo de nuevo.",
    "done.yourFavourite": "Tu favorita",
    "done.yourFavourites": "Tus favoritas",
    "done.wantToOrder": "¿Te gustaría tener uno de los primeros Dormy? ¡Apúntate a la lista de Beta testers!",
    "done.wantToOrderPlural": "¿Te gustaría tener uno de los primeros Dormy? ¡Apúntate a la lista de Beta testers!",
    "done.enterEmail": "Introduce tu email",
    "done.submitOrder": "Enviar",
    "done.orderConfirmation": "¡Gracias! Nos pondremos en contacto.",
    "done.noFavourites": "¡Gracias por participar!",
    "done.ctaBeta": "Apúntate a la lista de beta testers",
    "done.ctaBetaDesc": "Sé el primero en saber cuándo se lanza Dormy",
    "done.ctaBetaSuccess": "¡Estás en la lista!",
    "done.ctaPreorder": "Compra tu Dormy con descuento (pre-pedido) — {price}",
    "done.ctaPreorderDesc": "Descuento exclusivo para nuestros primeros adoptantes!",
    "done.ctaPreorderSuccess": "¡Pre-pedido confirmado! Nos pondremos en contacto.",
    "done.ctaShare": "Ayúdanos! Envía esta divertida encuesta a tus amigos!",
    "done.ctaShareDesc": "¡Esto nos ayuda a todos!",
    "done.shareWhatsAppMessage": "¡Eh! ¡Mira Dormy! Acabo de ayudar a dar forma a este nuevo cargador inteligente. Haz el quiz aquí: {url}",
    "done.shareWhatsApp": "Enviar por WhatsApp",
    "done.shareCopyLink": "Copiar enlace",
    "done.shareLinkCopied": "¡Copiado!",
  },
  ca: {
    "intro.start": "Començar",
    "intro.imageCount": "Veuràs {count} imatge{plural}",
    "intro.guidedTourCount": "Avaluaràs {count} imatge{plural} i després compararàs {pairs} parells",
    "intro.sessionNotFound": "Enquesta no trobada.",
    "intro.loadError": "Error en carregar l'enquesta.",

    "intro.firstName": "Nom",
    "intro.lastName": "Cognom (opcional)",
    "intro.age": "Edat (opcional)",
    "intro.firstNameRequired": "Si us plau, introdueix el teu nom",
    "intro.audioConsent": "Està bé gravar àudio? Utilitzarem la transcripció per avaluar millor els teus comentaris.",
    "intro.audioYes": "Sí",
    "intro.audioNo": "No",

    "eval.phaseLabel": "Fase 1 de 2 — Valorar",
    "eval.nOfM": "{n} de {total}",
    "eval.seeVideo": "Veure vídeo",
    "eval.recording": "Gravant...",
    "eval.audioRecorded": "Àudio gravat",
    "eval.next": "Següent",
    "eval.nextPhase": "Següent fase",
    "eval.finish": "Acabar",
    "eval.submitting": "Enviant...",
    "eval.submitError": "No s'ha pogut enviar la teva resposta. Torna-ho a provar.",
    "eval.noImages": "No hi ha imatges per avaluar.",
    "eval.scaleLow": "Dolent!",
    "eval.scaleHigh": "Genial!",
    "eval.preferThis": "Prefereixo aquesta",
    "eval.playingAudio": "Reproduint àudio...",
    "eval.oops": "Ups",

    "compare.phaseLabel": "Fase 2 de 2 — Comparar",
    "compare.pairNofM": "Parell {n} de {total}",
    "compare.vs": "VS",
    "compare.tapInstruction": "Toca la imatge que prefereixis",
    "compare.stronglyPrefer": "Prefereixo molt",
    "compare.noPreference": "Sense preferència",
    "compare.noPairs": "No hi ha parells per comparar.",
    "compare.breakTitle": "Gairebé acabat! Pots fer-ne unes quantes més?",
    "compare.breakContinue": "D'acord, endavant",
    "compare.breakTired": "Ho sento, estic cansat/da",
    "compare.round2Label": "Ronda extra",

    "done.finalThoughts": "Alguna impressió final?",
    "done.finalThoughtsPlaceholder": "Escriu les teves impressions aquí...",
    "done.doneButton": "Fet",
    "done.modalTitle": "Abans de marxar!",
    "done.submitRecording": "Enviar gravació",
    "done.submitting": "Enviant...",
    "done.confirmation": "La teva gravació s'ha enviat. Gràcies!",
    "done.closeTab": "Gràcies! Tot FET!",
    "done.submitError": "No s'ha pogut enviar la teva gravació. Torna-ho a provar.",
    "done.yourFavourite": "La teva favorita",
    "done.yourFavourites": "Les teves favorites",
    "done.wantToOrder": "T'agradaria tenir un dels primers Dormy? Apunta't a la llista de Beta testers!",
    "done.wantToOrderPlural": "T'agradaria tenir un dels primers Dormy? Apunta't a la llista de Beta testers!",
    "done.enterEmail": "Introdueix el teu email",
    "done.submitOrder": "Enviar",
    "done.orderConfirmation": "Gràcies! Ens posarem en contacte.",
    "done.noFavourites": "Gràcies per participar!",
    "done.ctaBeta": "Apunta't a la llista de beta testers",
    "done.ctaBetaDesc": "Sigues el primer en saber quan es llança Dormy",
    "done.ctaBetaSuccess": "Ets a la llista!",
    "done.ctaPreorder": "Compra el teu Dormy amb descompte (pre-comanda) — {price}",
    "done.ctaPreorderDesc": "Descompte exclusiu per als nostres primers adoptants!",
    "done.ctaPreorderSuccess": "Pre-comanda confirmada! Ens posarem en contacte.",
    "done.ctaShare": "Ajuda'ns! Envia aquesta divertida enquesta als teus amics!",
    "done.ctaShareDesc": "Això ens ajuda a tots!",
    "done.shareWhatsAppMessage": "Ei! Mira Dormy! Acabo d'ajudar a donar forma a aquest nou carregador intel·ligent. Fes el quiz aquí: {url}",
    "done.shareWhatsApp": "Enviar per WhatsApp",
    "done.shareCopyLink": "Copiar enllaç",
    "done.shareLinkCopied": "Copiat!",
  },
};

export function t(
  locale: Locale,
  key: string,
  params?: Record<string, string | number>
): string {
  const str = translations[locale]?.[key] ?? translations.en[key] ?? key;
  if (!params) return str;
  return str.replace(/\{(\w+)\}/g, (_, k) =>
    params[k] !== undefined ? String(params[k]) : `{${k}}`
  );
}
